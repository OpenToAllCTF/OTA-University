{% block content %}
{# Show the challenge if it is active or if the user is staff #}
  {% if challenge.is_active or request.user.is_staff %}
      <div class="col-sm-12 col-md-6 col-lg-4 mb-3">
      <div class="card">

          {# User completed challenge #}
          {% if is_solved %}
              <div class="card-body bg-success text-white link-success">
          {% else %}
              <div class="card-body">
          {% endif %}

          {# Challenge name and point value #}
          <h5 class="card-title">

            {# Show edit option if staff #}
            {% if request.user.is_staff %}
                <a href="{% url "ctf_framework:challenge#edit" challenge.id %}">{{ challenge.name }}</a>
            {% else %}
                <span>{{ challenge.name }}</span>
            {% endif %}

            {# Challenge is active #}
            {% if challenge.is_active %}
              <span class="float-right badge badge-info border border-white">
                {{ challenge.point_value }} pts
              </span>
            {% else %} {# Challenge is inactive #}
              <span class="float-right badge badge-danger">
                {{ challenge.point_value }} pts
              </span>
            {% endif %}
          </h5>

          {# Challenge author #}
          <p class="card-text"><b>Author:</b>&nbsp;
              {{ challenge.author }}

              <br>
              {# Number of Solves #}
              <b>Solves:</b>&nbsp;
              {{ challenge.number_of_solves }}
              <br>

              {# First Blood #}
              <b>First Blood:</b>&nbsp;
              {{ challenge.first_blood }}

          </p>

          {# Challenge description #}
          <p class="card-text">
              {{ challenge.description|linebreaks|urlize }}
          </p>

          <hr/>

          {# Challenge connection information #}
          <p class="card-text">
              {% if "http" in challenge.connection_info %}
                  {{ challenge.connection_info|urlize }}
              {% else %}
                  {{ challenge.connection_info }}
              {% endif %}
          </p>

          {# Show writeups for users' who completed the challenge #}
          {% if is_solved %}
              <a class="btn btn-secondary btn-sm"
                 href="{% url "ctf_framework:writeup#index" challenge.id %}"
                 role="button">Writeups</a>
          {% endif %}

          </div>
          </div>
      </div>
  {% endif %}
{% endblock %}
