{% extends "layouts/base.html" %}
{% block content %}
<div class="container">

  <!-- Flag submission form -->
  <div class="mb-5">
      <form action="{% url 'ctf_framework:challenge#submit' %}" method="POST">
          <div class="input-group">
              <input name="flag" class="form-control" type="textfield">
              <div class="input-group-append">
                  <input class="btn btn-success" type="submit" value="Submit Flag">
              </div>
              {% csrf_token %}

              {# Show "Create challenge" button if staff #}
              {% if request.user.is_staff %}
                <a class="btn btn-primary ml-2"
                  href="{% url "ctf_framework:challenge#new" %}">Create Challenge</a>
              {% endif %}
          </div>
      </form>

  </div>

  {# Category tabs #}
  <ul class="nav nav-tabs mb-5">
    {% for category in categories %}
      <li class="nav-item">
        <a class="nav-link {% if forloop.first %} active {% endif %}" href="#{{ category }}"
          data-toggle="tab">
          {{ category }}
        </a>
      </li>
    {% endfor %}
  </ul>

  {# Tab contents #}
  <div class="tab-content" id="category-tabs-contents">
    {% for category in categories %}

      <div class="tab-pane {% if forloop.first %} active {% endif %}" id="{{ category }}">
        <div class="row">
          {% for challenge in category.challenges %}
            {% if challenge in solved_challenges %}
              {% include "challenge/_challenge.html" with challenge=challenge is_solved=True %}
            {% else %}
              {% include "challenge/_challenge.html" with challenge=challenge is_solved=False %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
